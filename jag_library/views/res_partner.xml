<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_partner_form" model="ir.ui.view">
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="priority" eval="99" />
        <field name="arch" type="xml">
            <field name="company_type" position="replace">
                <div class="d-flex align-items-center">
                    <field name="company_type" widget="radio" options="{'horizontal': true}" />
                    <span invisible="is_company" class="o_row ms-4">
                        <field name="is_author" nolabel="1" />
                        <label for="is_author" />
                    </span>
                    <span invisible="not is_company" class="o_row ms-4">
                        <field name="is_publisher" nolabel="1" />
                        <label for="is_publisher" />
                    </span>
                </div>
            </field>
            <xpath expr="//page[@name='internal_notes']" position="after">
                <page name="books" string="books" invisible="not is_author and not is_publisher">
                    <group invisible="not is_author">
                        <field name="authored_book_ids" nolabel="1">
                            <list>
                                <field name="name" />
                                <field name="binding" />
                                <field name="edition" />
                                <field name="publication_year" />
                                <field name="number_of_pages" />
                                <field name="language" context="{'active_test': False}" />
                            </list>
                        </field>
                    </group>

                    <group invisible="not is_publisher">
                        <field name="published_book_ids" nolabel="1">
                            <list>
                                <field name="name" />
                                <field name="binding" />
                                <field name="edition" />
                                <field name="publication_year" />
                                <field name="number_of_pages" />
                                <field name="language" context="{'active_test': False}" />
                            </list>
                        </field>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_res_partner_filter_library" model="ir.ui.view">
        <field name="name">res.partner.select.library</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" />
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='type_company']" position="after">
                <separator />
                <filter string="Contacts" name="contacts_only" domain="[('is_author', '=', False), ('is_publisher', '=', False)]" />
                <filter string="Authors" name="authors" domain="[('is_author', '=', True)]" />
                <filter string="Publishers" name="publishers" domain="[('is_publisher', '=', True)]" />
            </xpath>
        </field>
    </record>

    <record id="contacts.action_contacts" model="ir.actions.act_window">
        <field name="context">{'search_default_contacts_only': 1}</field>
    </record>

</odoo>
